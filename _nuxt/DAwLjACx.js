import{_ as S,x as B,y as N,d as L,I as M,J as F,P as I,h as u,a as P,r as V,G as K,L as U,u as H,K as W,e as $,M as h,N as T,O as A,Q as q,R as z,S as G,T as J,U as Q,V as X,W as D,X as Y,B as O}from"#entry";const Z={};function ee(t,e){return N(),B("div")}const ne=Object.assign(S(Z,[["render",ee]]),{__name:"HeaderCus"}),w=(t="RouteProvider")=>L({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const a=e.renderKey,r=e.route,o={};for(const i in e.route)Object.defineProperty(o,i,{get:()=>a===e.renderKey?e.route[i]:r[i],enumerable:!0});return M(I,F(o)),()=>e.vnode?u(e.vnode,{ref:e.vnodeRef}):e.vnode}}),te=w(),j=new WeakMap,oe=L({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:a,expose:r}){const o=P(),i=V(),d=K(I,null);let p;r({pageRef:i});const c=K(U,null);let s;const v=o.deferHydration();if(o.isHydrating){const n=o.hooks.hookOnce("app:error",v);H().beforeEach(n)}t.pageKey&&W(()=>t.pageKey,(n,_)=>{n!==_&&o.callHook("page:loading:start")});let l=!1;{const n=H().beforeResolve(()=>{l=!1});$(()=>{n()})}return()=>u(Q,{name:t.name,route:t.route,...e},{default:n=>{const _=re(d,n.route,n.Component),k=d&&d.matched.length===n.route.matched.length;if(!n.Component){if(s&&!k)return s;v();return}if(s&&c&&!c.isCurrent(n.route))return s;if(_&&d&&(!c||c?.isCurrent(d)))return k?s:null;const f=h(n,t.pageKey),R=ie(d,n.route,n.Component);!o.isHydrating&&p===f&&!R&&T(()=>{l=!0,o.callHook("page:loading:end")}),p=f;const m=!!(t.transition??n.route.meta.pageTransition??A),E=m&&ae([t.transition,n.route.meta.pageTransition,A,{onAfterLeave(){delete o._runningTransition,o.callHook("page:transition:finish",n.Component)}}]),x=t.keepalive??n.route.meta.keepalive??q;return s=z(m&&E,G(x,u(J,{suspensible:!0,onPending:()=>{m&&(o._runningTransition=!0),o.callHook("page:start",n.Component)},onResolve:()=>{T(()=>o.callHook("page:finish",n.Component).then(()=>{if(delete o._runningTransition,!l&&!R)return l=!0,o.callHook("page:loading:end")}).finally(v))}},{default:()=>{const C={key:f||void 0,vnode:a.default?se(a.default,n):n.Component,route:n.route,renderKey:f||void 0,trackRootNodes:m,vnodeRef:i};if(!x)return u(te,C);const y=n.Component.type,b=y;let g=j.get(b);return g||(g=w(y.name||y.__name),j.set(b,g)),u(g,C)}}))).default(),s}})}});function ae(t){const e=t.filter(Boolean).map(a=>({...a,onAfterLeave:a.onAfterLeave?X(a.onAfterLeave):void 0}));return D(...e)}function re(t,e,a){if(!t)return!1;const r=e.matched.findIndex(o=>o.components?.default===a?.type);return!r||r===-1?!1:e.matched.slice(0,r).some((o,i)=>o.components?.default!==t.matched[i]?.components?.default)||a&&h({route:e,Component:a})!==h({route:t,Component:a})}function ie(t,e,a){return t?e.matched.findIndex(o=>o.components?.default===a?.type)<e.matched.length-1:!1}function se(t,e){const a=t(e);return a.length===1?u(a[0]):u(Y,void 0,a)}const ue={};function de(t,e){const a=ne,r=oe;return N(),B("div",null,[O(a),O(r)])}const le=S(ue,[["render",de]]);export{le as default};
